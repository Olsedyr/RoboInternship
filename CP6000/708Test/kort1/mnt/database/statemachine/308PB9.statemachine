STATEMACHINEVERSION 2
Name=Pallebane9
Delaystop=10000000
Input=0,Foto1 "Pallebane9 Foto"
Output=0,Motor "Pallebane9 Motor"
Link=0,Pallebane7
Timeout=0,PickupDelay 3000000
Timeout=1,StopDelay 0
Timeout=2,StartupTimeout 5000000

State=0,ST_HALT
  END

State=0,ST_TIMER
  END

State=0,ST_IDLE
  SET Motor 0
  END

State=1,ST_READY
  TEST Foto1 = 0
    TIMEOUT PickupDelay ST_EMPTY
    SETSTATE ST_TIMER
  ELSE
    SET Motor 0
  ENDTEST
  TEST Pallebane7 = ST_IDLE
    SETSTATE ST_IDLE
  ENDTEST  
  END

State=2,ST_EMPTY
  TEST Pallebane7 = ST_READY
  OR Pallebane7 = ST_SEND
    SETSTATE ST_RECIEVE
  ENDTEST
  TEST Pallebane7 = ST_IDLE
    SETSTATE ST_IDLE
  ENDTEST  
  END

State=3,ST_RECIEVE
  TEST Foto1 = 1
    TIMEOUT StopDelay ST_READY
    SETSTATE ST_TIMER
  ELSE
    SET Motor 1
  ENDTEST
  END

State=4,ST_RESET
  TEST Foto1 = 1
    SETSTATE ST_READY
  ELSE
    TIMEOUT StartupTimeout ST_STOP
    SETSTATE ST_STOP
    SET Motor 1
  ENDTEST
  END

State=5,ST_STOP
  TEST Foto1 = 1
    SET Motor 0
    SETSTATE ST_READY
  ELSE
    TEST StartupTimeout = 1
      SET Motor 0
      SETSTATE ST_EMPTY
    ENDTEST
  ENDTEST
  END

  
