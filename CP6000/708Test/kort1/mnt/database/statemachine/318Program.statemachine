STATEMACHINEVERSION 3
Name=Program318
;signal to WorkCell that a new program has been selected
Value=usersection 0
Value=newprogram 1
Const=programidx 0
Link=workcell WorkCell
Value=usersection 0
Value=wBLayer 0
Value=canProgram 0
Value=timeInPalletB 0
Value=robotspeedpct 1.0
Value=autorobotspeed 0
Item=item CanBrickRowL
Item=itemCanBrickRowL CanBrickRowL
Item=itemCanBrickRowTest CanBrickRowTest
Item=itemJarBrickRowS JarBrickRowS
Item=itemJarBrickRowL JarBrickRowL
; Put programstates in top

; also edit 'subPrograms' for example VendePattern and PushPattern for particular program

State=PROGRAM_CANS1
  SET usersection 0
  SET newprogram 1
  SETITEM item itemCanBrickRowL
  SET canProgram 1
  SET usersection 1 ; user editable below
	SET wBLayer 11
  SET timeInPalletB 0
	SET robotspeedpct 100.0
	SET autorobotspeed 0
  SETSTATE ST_RUNNING_CANS1
END

State=PROGRAM_JARS1
  SET usersection 0
  SET newprogram 1
  SETITEM item itemJarBrickRowL
  SET canProgram 0
  SET usersection 1 ; user editable below
	SET wBLayer 10
  SET timeInPalletB 0
	SET robotspeedpct 100.0000
	SET autorobotspeed 0
  SETSTATE ST_RUNNING_JARS1
END

State=PROGRAM_USER1
  SET usersection 0
  SET newprogram 1
  SET usersection 1 ; user editable below
  SET canProgram 1
  SETITEM item itemCanBrickRowL
	SET wBLayer 10
  SET timeInPalletB 0
	SET robotspeedpct 100.0
	SET autorobotspeed 0
  SETSTATE ST_RUNNING_USER1
END

; RUNNING STATES

State=ST_RUNNING_CANS1
  SET newprogram 0
  TEST workcell = ST_IDLE
  OR workcell = ST_PAUSED
    TEST programidx != 0
      SETSTATE ST_RESET
    ENDTEST
  ENDTEST
END

State=ST_RUNNING_JARS1
  SET newprogram 0
  TEST workcell = ST_IDLE
  OR workcell = ST_PAUSED
    TEST programidx != 1
      SETSTATE ST_RESET
    ENDTEST
  ENDTEST
END

State=ST_RUNNING_USER1
  SET newprogram 0
  TEST workcell = ST_IDLE
  OR workcell = ST_PAUSED
    TEST programidx != 2
      SETSTATE ST_RESET
    ENDTEST
  ENDTEST
END

State=ST_TIMER
END

State=ST_HALT
END

State=ST_IDLE
  SETSTATE ST_RESET
END

State=ST_RESET
  TEST programidx = 0
    SETSTATE PROGRAM_CANS1
  ENDTEST
  TEST programidx = 1
    SETSTATE PROGRAM_JARS1
  ENDTEST
  TEST programidx = 2
    SETSTATE PROGRAM_USER1
  ENDTEST
END
