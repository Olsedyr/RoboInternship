STATEMACHINEVERSION 2
Name=ConveyorManuelIn
Input=0,Foto2 "ConveyorManuelIn foto2"
Input=1,Foto3 "ConveyorManuelIn foto3"
Input=2,Endestop "ConveyorIn endestop"
Output=0,Motor "ConveyorManuelIn Motor"
Link=0,Plads5
Link=1,PladsLoad
Link=2,Plads3
Link=3,Plads4
Timeout=0,stopDelay 0
Timeout=1,startDelay 0

State=0,ST_HALT
  END

State=0,ST_TIMER
  END

State=0,ST_IDLE
  SET Motor 0
END

State=5,ST_RESET
  TEST Foto2 = 1
    SETSTATE ST_STOP
  ELSE
    TIMEOUT startDelay ST_RUN
    SETSTATE ST_TIMER
  ENDTEST
  TEST Endestop = 0
    SETSTATE ST_IDLE
  ENDTEST
END

State=5,ST_RUN
  SET Motor 1
  TEST Foto2 = 1
  AND Foto3 = 1
    TIMEOUT stopDelay ST_STOP
    SETSTATE ST_TIMER 
  ENDTEST
  TEST PladsLoad = ST_EMPTY
  AND Plads3 = ST_EMPTY
  AND Plads4 = ST_EMPTY
  AND Plads5 = ST_EMPTYMANUEL
    SETSTATE ST_STOP
  ENDTEST
  TEST Plads5 = ST_IDLE
    TIMEOUT stopDelay ST_IDLE
    SETSTATE ST_TIMER
  ENDTEST
END

State=5,ST_STOP
  SET Motor 0
  TEST Foto3 = 0
    TEST PladsLoad != ST_EMPTY
    OR Plads3 != ST_EMPTY
    OR Plads4 != ST_EMPTY
    OR Plads5 != ST_EMPTYMANUEL
      TIMEOUT startDelay ST_RUN
      SETSTATE ST_TIMER
    ENDTEST 
  ENDTEST
  TEST Plads5 = ST_IDLE
    TIMEOUT stopDelay ST_IDLE
    SETSTATE ST_TIMER
  ENDTEST
END
