STATEMACHINEVERSION 3
Name=TippeCount
Link=TippeStation
Link=TippePattern
Link=foto1 TippeFoto
Link=parent Parent
linkValue=firstRun WorkCell
linkValue=numpercycle TippePattern
Value=numofproducts 0
Timeout=TimeGoIdle 500000

State=ST_TIMER
END

State=ST_HALT
END

State=ST_IDLE
	TEST parent = ST_RESET
		SETSTATE ST_RESET
	ENDTEST
END

State=ST_RESET
	TEST firstRun = 1
		SET numofproducts 0
	ENDTEST
	TEST TippeStation = ST_RUN
		SETSTATE ST_RUN
	ENDTEST
END

State=ST_RUN
	TEST foto1 = ST_LOW
		CALC numofproducts = numofproducts % numpercycle
		CALC numofproducts = numofproducts + 1
	ENDTEST
	TEST TippeStation = ST_IDLE
		TIMEOUT TimeGoIdle ST_GOIDLE
		SETSTATE ST_GOIDLE
	ENDTEST
END

State=ST_GOIDLE
	TEST foto1 = ST_LOW
		CALC numofproducts = numofproducts % numpercycle
		CALC numofproducts = numofproducts + 1
	ENDTEST
	TEST TimeGoIdle = 1
		SETSTATE ST_IDLE
	ENDTEST
END
