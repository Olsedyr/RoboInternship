STATEMACHINEVERSION 3
Include=scissordepalletizer_for_cardboard.statemachine
Name=ScissorDepalletizer4_7
Output=rollerfwd "PC3 POS.4.7 Motor"
Output=rollerrev "PC3 POS.4.7 MotorRev"
Output=pump "ScissorTable POS.4.7 Pump"
Output=yv1 "ScissorTable POS.4.7 YV1"
Output=yv2 "ScissorTable POS.4.7 YV2"
Output=yv3 "ScissorTable POS.4.7 YV3"
Output=centre "CentreValve POS.4.7"
Output=scissorSecureReset "Scissor Secure Reset"
linkValue=palletInPlace test Sc4_7PalletInPlace
Input=palletInPlacePrev "PC2 POS.4.6 Photo"
Input=photoup "ScissorTable POS.4.7 PhotoUp"
linkValue=limitdown test Sc4_7PhotoDownLimit
linkValue=limitup test Sc4_7PhotoUpLimit
linkValue=palletizingEnable Program321
Link=next Pos4_8
Link=prev Pos4_6
Link=parent Parent 
Value=finito 0
Value=inTopPos 0
Value=simulate 0
Value=message 0
Const=ON 0
Const=scUpON 0
Value=moveIsSafe 0
Value=cPallet 0
Value=upstep 0
Timeout=maxDelayStop 10000000
Timeout=StopDelay 100000
Timeout=TimeCentrePos 1500000
Timeout=TimeCentre 3500000
Timeout=MinTimeSearchEdge 500000
Timeout=TimeRevAfterRec 1000000
Timeout=TimeFwdCentre 4000000
Value=reverseCommand 0

; a scissorpalletizer is fast up / std down
; a scissordepalletizer is std up / fast down

State=ST_IDLE
  ; set roller 0 before idle. Otherwise PalletReverse cant do it
;  SET rollerfwd 0
;  SET rollerrev 0
  SET pump 0
  SET yv1 0
	SET yv2 0
	SET yv3 0
  SET centre 0
  TEST parent = ST_RESET
  OR simulate = 1
    TEST palletizingEnable = 1
      SET errorCode 0
      SETSTATE ST_RESET
    ENDTEST
  ELSE
    TEST reverseCommand = 1
			SET inrr 0
			SET centre 0
			SET yv1 1
			SET yv2 1
			SET yv3 0
			TEST limitdown = 1
				SET reverseCommand 2
				SET yv1 0
				SET yv2 0
				SET yv3 0
			ENDTEST
    ENDTEST
  ENDTEST
END
