STATEMACHINEVERSION 3
Name=MasterProg
;signal to WorkCell that a new program has been selected
Value=programidx 0
Value=usersection 0
Value=Mcasekind 6
Value=M702left 1
Value=M702right 0
Value=Mbagspercase 18
Value=Mlayersperpallet 5
Value=Mcasesinbatch 500
Value=MstrapProgram 0
Value=Mupperweight 1200
Value=Mlowerweight 900
linkValue=batchCount ProgramB1
Value=batchrunning 0

; casekind = 0  -> none
; casekind = 1  -> C11
; casekind = 2  -> C14
; casekind = 3  -> C18
; casekind = 4  -> hybschA
; casekind = 5  -> hybschB
; casekind = 6  -> Netto
; casekind = 7  -> EPS610
; casekind = 8  -> IFCO16
; casekind = 9  -> IFCO18
; casekind = 10 -> IFCO20

State=PROGRAM_C18
	SET usersection 0
	SET Mcasekind 3
	SET usersection 1 ; user editable below
	SET M702left 1
	SET M702right 0
	SET Mbagspercase 15
	SET Mlayersperpallet 9
	SET MstrapProgram 2
	SET Mcasesinbatch 100000
	SET Mlowerweight 900
	SET Mupperweight 1200
	SETSTATE ST_START
END

State=PROGRAM_NETTO
	SET usersection 0
	SET Mcasekind 6
	SET usersection 1 ; user editable below
	SET M702left 1
	SET M702right 0
	SET Mbagspercase 18
	SET Mlayersperpallet 5
	SET MstrapProgram 1
	SET Mcasesinbatch 100000
	SET Mlowerweight 900
	SET Mupperweight 1200
	SETSTATE ST_START
END

State=PROGRAM_CUSTOM1
	SET usersection 1 ; user editable below
	SET Mcasekind 6
	SET M702left 1
	SET M702right 0
	SET Mbagspercase 18
	SET Mlayersperpallet 5
	SET MstrapProgram 1
	SET Mcasesinbatch 100000
	SET Mlowerweight 900
	SET Mupperweight 1200
	SETSTATE ST_START
END

State=PROGRAM_CUSTOM2
	SET usersection 1 ; user editable below
	SET Mcasekind 6
	SET M702left 1
	SET M702right 0
	SET Mbagspercase 18
	SET Mlayersperpallet 5
	SET MstrapProgram 1
	SET Mcasesinbatch 100000
	SET Mlowerweight 900
	SET Mupperweight 1200
	SETSTATE ST_START
END

State=PROGRAM_CUSTOM3
	SET usersection 1 ; user editable below
	SET Mcasekind 6
	SET M702left 1
	SET M702right 0
	SET Mbagspercase 18
	SET Mlayersperpallet 5
	SET MstrapProgram 1
	SET Mcasesinbatch 100000
	SET Mlowerweight 900
	SET Mupperweight 1200
	SETSTATE ST_START
END

State=PROGRAM_CUSTOM4
	SET usersection 1 ; user editable below
	SET Mcasekind 6
	SET M702left 1
	SET M702right 0
	SET Mbagspercase 18
	SET Mlayersperpallet 5
	SET MstrapProgram 1
	SET Mcasesinbatch 100000
	SET Mlowerweight 900
	SET Mupperweight 1200
	SETSTATE ST_START
END

State=ST_START
	SET batchrunning 1
	SET batchCount Mcasesinbatch
	SETSTATE ST_RUNNING
END

State=ST_RUNNING
	TEST batchrunning = 0
	OR batchCount >= 0
		SETSTATE ST_IDLE
  ENDTEST
END

State=ST_TIMER
END

State=ST_HALT
END

State=ST_IDLE
END

State=ST_RESET
  TEST programidx = 0
    SETSTATE PROGRAM_C18
  ENDTEST
  TEST programidx = 1
    SETSTATE PROGRAM_NETTO
  ENDTEST
  TEST programidx = 2
    SETSTATE PROGRAM_CUSTOM1
  ENDTEST
  TEST programidx = 3
    SETSTATE PROGRAM_CUSTOM2
  ENDTEST
  TEST programidx = 4
    SETSTATE PROGRAM_CUSTOM3
  ENDTEST
  TEST programidx = 5
    SETSTATE PROGRAM_CUSTOM4
  ENDTEST
END
