STATEMACHINEVERSION 3
Name=Input
Input=input "dummyOff"
;how long must input be active before it is recognised as on
Timeout=TimeOn 1000000
;how long must input be not active before it is recognised as off
Timeout=TimeOff 1000000
Value=test 0
Const=active 1

State=ST_HALT
  SETSTATE ST_IDLE
END

State=ST_TIMER
END

State=ST_RESET
  SETSTATE ST_IDLE
END

State=ST_IDLE
  TEST input != active 
    SET test 0
    TIMEOUT TimeOff ST_OFF
    SETSTATE ST_OFF
  ELSE
    SET test 1
    TIMEOUT TimeOn ST_ON
    SETSTATE ST_ON
  ENDTEST
END

State=ST_OFF
  TEST input = active
    TIMEOUT TimeOn ST_ON
    SETSTATE ST_ON
  ELSE
    TEST TimeOff = 1
    AND test = 1
      SETSTATE ST_LOW
    ENDTEST
  ENDTEST
END

State=ST_ON
  TEST input != active
    TIMEOUT TimeOff ST_OFF
    SETSTATE ST_OFF
  ELSE
    TEST TimeOn = 1
    AND test = 0
      SETSTATE ST_HIGH
    ENDTEST
  ENDTEST
END

State=ST_LOW
  SET test 0
  SETSTATE ST_OFF
END

State=ST_HIGH
  SET test 1
  SETSTATE ST_ON
END
