STATEMACHINEVERSION 3
Name=TripWatch
Input=shuttlepc "Shuttle PC POS.5.10 Motor Tripped"
Input=pm "PalletMagazine Tripped"
Input=pc9 "PC9 POS.5.9 Tripped"
Input=shuttlestatus "Shuttle Status"
Link=parent Parent
Value=errorCode 0
State=ST_TIMER
END

State=ST_HALT
	SETSTATE ST_IDLE
END

State=ST_IDLE
	TEST parent = ST_RESET
		SET errorCode 0
		SETSTATE ST_RESET
	ENDTEST
END

State=ST_RESET
	SETSTATE ST_WATCH
END

State=ST_WATCH
  TEST shuttlepc = 1
  OR pm = 1
  OR pc9 = 1
		SET errorCode 1116
  ENDTEST
  TEST shuttlestatus != 16
	AND shuttlestatus != 32
	AND shuttlestatus != 48
	AND shuttlestatus != 64
	AND shuttlestatus != 80
	AND shuttlestatus != 0
		SET errorCode 1099
	ENDTEST
	TEST parent = ST_IDLE
		SETSTATE ST_IDLE
	ENDTEST
END
