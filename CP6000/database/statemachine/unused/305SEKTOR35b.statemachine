STATEMACHINEVERSION 2
Name=Sektor35b
Delaystop=10000000
Input=0,Foto1 "Sektor35b Foto1"
;output der løfter 4 ruller og derved stopper kassen selvom bånd kører
Output=0,Cylinder "Sektor35b Cylinder"
Link=0,Sektor36
Link=1,Sektor35a
Timeout=0,StopDelay 200000
Timeout=1,TimeoutDelay 20000000

State=0,ST_HALT
  END

State=0,ST_TIMER
  END


State=0,ST_IDLE
  SET Cylinder 0
  END

State=1,ST_READY
  TEST Foto1 = 0
    SETSTATE ST_EMPTY
  ELSE
    TEST Sektor36 = ST_EMPTY
    OR Sektor36 = ST_RECIEVE1
    OR Sektor36 = ST_RECIEVE2
      SET Cylinder 0
      SETSTATE ST_SEND
    ELSE
      SET Cylinder 1
    ENDTEST
  ENDTEST
  TEST Sektor35a = ST_IDLE
    SETSTATE ST_IDLE
  ENDTEST
  END

State=2,ST_SEND
  TEST Foto1 = 0
    TIMEOUT StopDelay ST_EMPTY
    SETSTATE ST_TIMER
  ENDTEST
  TEST Sektor36 = ST_READY_ROBOT
    SETSTATE ST_READY
  ENDTEST
  END


State=3,ST_EMPTY
  TEST Foto1 = 1
    SETSTATE ST_READY
  ELSE
    TEST Sektor35a = ST_READY
    OR Sektor35a = ST_SEND
      TIMEOUT TimeoutDelay ST_RESET
      SET Cylinder 0
      SETSTATE ST_RECIEVE
    ELSE
      SET Cylinder 0
    ENDTEST
  ENDTEST
  TEST Sektor35a = ST_IDLE
    SETSTATE ST_IDLE
  ENDTEST
  END

State=4,ST_RECIEVE
  TEST Foto1 = 1
    SETSTATE ST_READY
  ELSE 
    TEST TimeoutDelay = 1
      SETSTATE ST_RESET
    ENDTEST
  ENDTEST
  END

State=5,ST_RESET
  TEST Foto1 = 1
    SETSTATE ST_READY
  ELSE
    SETSTATE ST_EMPTY
  ENDTEST
  END


