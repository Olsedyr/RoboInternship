STATEMACHINEVERSION 3
Include=cptripwatch2.statemachine
Name=TripWatch
Input=extra1 "dummyOn"
Const=extra1Pol 0
;** User section **
;Input=stopstatus "KasseStop Status"

State=ST_WATCH
	TEST conveyor1 = 0
	OR conveyor2 = 0
		SET errorCode 1100
	ENDTEST
	TEST skubberstatus != 16
	AND skubberstatus != 32
	AND skubberstatus != 48
	AND skubberstatus != 64
	AND skubberstatus != 80
	AND skubberstatus != 0
		SET errorCode 1101
	ENDTEST
	TEST bufferstatus != 16
	AND bufferstatus != 32
	AND bufferstatus != 48
	AND bufferstatus != 64
	AND bufferstatus != 80
	AND bufferstatus != 0
		SET errorCode 1102
	ENDTEST
	TEST liftstatus != 16
	AND liftstatus != 32
	AND liftstatus != 48
	AND liftstatus != 64
	AND liftstatus != 80
	AND liftstatus != 0
		SET errorCode 1103
	ENDTEST
;	TEST stopstatus != 16
;	AND stopstatus != 32
;	AND stopstatus != 48
;	AND stopstatus != 64
;	AND stopstatus != 80
;	AND stopstatus != 0
;		SET errorCode 1132
;	ENDTEST
	TEST inliner = 1
		SET errorCode 1104
	ENDTEST
	TEST liftconveyor = 1
		SET errorCode 1105
	ENDTEST
	TEST vibrator = 1
		SET errorCode 1106
	ENDTEST
  TEST extra1 = extra1Pol
    SET errorCode extra1ErrorCode
  ENDTEST
	TEST parent = ST_IDLE
		SETSTATE ST_IDLE
	ENDTEST
END
