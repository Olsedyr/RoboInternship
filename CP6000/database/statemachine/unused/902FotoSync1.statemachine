STATEMACHINEVERSION 3
Name=FotoSync1
Link=foto Vende1Foto1
Link=vs VendeStation
Link=pc ProductConveyors
Timeout=TimeSync 5000000

State=ST_HALT
  SETSTATE ST_IDLE
END

State=ST_TIMER
END

State=ST_IDLE
	TEST pc = ST_RUN
	AND vs = ST_RUN
		TIMEOUT TimeSync ST_RUN
		SETSTATE ST_RUN
	ELSE 
		SETSTATE ST_STOP
	ENDTEST
END


State=ST_RUN
	TEST pc != ST_RUN
	OR vs != ST_RUN
		SETSTATE ST_STOP
  ELSE
		TEST foto = ST_LOW
			TIMEOUT TimeSync ST_RUN
			SETSTATE ST_RUN
		ELSE
			TEST TimeSync = 1
				SETSTATE ST_SYNC
			ENDTEST
		ENDTEST
	ENDTEST
END

State=ST_STOP
	TEST pc = ST_RUN
	AND vs = ST_RUN
		TIMEOUT TimeSync ST_RUN
		SETSTATE ST_RUN
	ENDTEST
END

State=ST_SYNC
	TIMEOUT TimeSync ST_RUN
	SETSTATE ST_RUN
END
