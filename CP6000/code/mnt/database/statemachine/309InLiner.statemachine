STATEMACHINEVERSION 2
Name=InLiner
Delaystop=10000000
Input=0,Foto "InLiner Foto"
Output=0,Motor "InLiner Motor"
Link=0,KassePakkerTop
Link=1,InLinerFoto
Link=2,KassePakkerMotor
Timeout=0,TimeRun 2000000
Timeout=1,TimePause 10000
Value=0,enablepause 0
Value=1,one 1

State=0,ST_HALT
  END

State=0,ST_TIMER
  END

State=0,ST_IDLE
  SET Motor 0
END

State=5,ST_RESET
  SETSTATE ST_STOP
END

State=5,ST_PAUSE
  SET Motor 0
  TEST KassePakkerMotor = ST_RUN
    TIMEOUT TimePause ST_GORUN
    SETSTATE ST_GORUN
  ENDTEST
  TEST KassePakkerTop = ST_IDLE
  OR KassePakkerTop = ST_MANUEL
    SETSTATE ST_IDLE
  ENDTEST
END

State=5,ST_GORUN
  TEST TimePause = 1
    SET Motor 1
    SETSTATE ST_RUN
  ENDTEST
  TEST KassePakkerTop = ST_IDLE
  OR KassePakkerTop = ST_MANUEL
    SETSTATE ST_IDLE
  ENDTEST
END

State=5,ST_RUN
  SET Motor 1
  TEST enablepause = one
  AND KassePakkerMotor = ST_STOP
  AND Foto = 0
    SETSTATE ST_PAUSE
  ENDTEST
  TEST InLinerFoto = ST_LOW
    SETSTATE ST_STOP
  ENDTEST
  TEST KassePakkerTop = ST_IDLE
  OR KassePakkerTop = ST_MANUEL
    SETSTATE ST_IDLE
  ENDTEST
END

State=5,ST_STOP
  SET Motor 0
  TEST KassePakkerMotor = ST_RUN
    TIMEOUT TimeRun ST_RUN
    SETSTATE ST_TIMER
  ENDTEST
  TEST KassePakkerTop = ST_IDLE
  OR KassePakkerTop = ST_MANUEL
    SETSTATE ST_IDLE
  ENDTEST
END

State=5,ST_RESETTURN
  SET enablepause 1
END
