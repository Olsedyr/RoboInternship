STATEMACHINEVERSION 3
Name=Conv4
Output=motor "Conv4 Motor"
Link=next Conv5  
Value=motorRunning 0
linkValue=nextMotorRunning calling next
Timeout=startDelay 1000000

State=ST_HALT
END

State=ST_TIMER
END

State=ST_IDLE
  SET motor 0
  SET motorRunning 0
  TEST next != ST_IDLE
    SETSTATE ST_RESET
  ENDTEST
END

State=ST_PAUSE
  TEST nextMotorRunning = 1
  AND startDelay = 1  
    SETSTATE ST_RUN
  ELSE
    SET motor 0
    SET motorRunning 0
  ENDTEST
  TEST next = ST_IDLE
    SETSTATE ST_IDLE
  ENDTEST
END

State=ST_RUN
  TEST nextMotorRunning = 0
    TIMEOUT startDelay ST_PAUSE
    SETSTATE ST_PAUSE
  ELSE
    SET motor 1
    SET motorRunning 1
  ENDTEST
  TEST next = ST_IDLE
    SETSTATE ST_IDLE
  ENDTEST
END

State=ST_RESET
  TIMEOUT startDelay ST_PAUSE
  SETSTATE ST_PAUSE
END
