STATEMACHINEVERSION 3
Name=VendePattern
Link=Program
Link=VendeCount
linkValue=nop numofproducts VendeCount
Value=curturn 0
Value=turn1 0
Value=turn2 0
Value=turn3 0
Value=turn4 0
Value=turn5 0
Value=turn6 0
Value=turn7 0
Value=turn8 0
Value=turn9 0
Value=turn10 0
Value=turn11 0
Value=turn12 0
Value=turn13 0
Value=turn14 0
Value=turn15 0
Value=turn16 0
Value=numpercycle 8
Const=maxnumpercycle 16

State=ST_TIMER
END

State=ST_HALT
END

State=ST_IDLE
	TEST VendeCount = ST_RESET
		SETSTATE ST_RESET
	ENDTEST
END

State=ST_RESET
	TEST Program = ST_RUNNING_C11SMALL8
	OR Program = ST_RUNNING_PAPSMALL8
	OR Program = ST_RUNNING_PAPSMALL8_TURN
		SETSTATE ST_NOTURN_CYCLE8
	ELSE
		TEST Program = ST_RUNNING_C11LARGE6
			SETSTATE ST_START_C11LARGE6
		ELSE
			TEST Program = ST_RUNNING_C18BAGS6
				SETSTATE ST_START_C18BAGS6
			ELSE
				TEST Program = ST_RUNNING_C18BAGS8
					SETSTATE ST_START_C18BAGS8
				ELSE
					TEST Program = ST_RUNNING_EPS610SMALL7
						SETSTATE ST_START_EPS610SMALL7
					ELSE 
						TEST Program = ST_RUNNING_C18BAGS3
							SETSTATE ST_START_C18BAGS3
						ELSE
							TEST Program = ST_RUNNING_C18BAGS6_ALT
								SETSTATE ST_NOTURN_CYCLE6
							ELSE
      					TEST Program = ST_RUNNING_C14BAGS6
					        SETSTATE ST_START_C14BAGS6
				  			ENDTEST
  		  			ENDTEST
						ENDTEST
					ENDTEST
				ENDTEST
			ENDTEST
		ENDTEST
	ENDTEST
END

State=ST_START_EPS610SMALL7
	SET numpercycle 7
	SET turn1 0
	SET turn2 1
	SET turn3 0
	SET turn4 0
	SET turn5 1
	SET turn6 0
	SET turn7 1
	; default others
	SET turn8 0
	SET turn9 0
	SET turn10 0
	SET turn11 0
	SET turn12 0
	SET turn13 0
	SET turn14 0
	SET turn15 0
	SET turn16 0
	SETSTATE ST_GO
END

State=ST_START_C11LARGE6
	SET numpercycle 6
	SET turn1 1
	SET turn2 0
	SET turn3 0
	SET turn4 1
	SET turn5 1
	SET turn6 0
	; default others
	SET turn7 0
	SET turn8 0
	SET turn9 0
	SET turn10 0
	SET turn11 0
	SET turn12 0
	SET turn13 0
	SET turn14 0
	SET turn15 0
	SET turn16 0
	SETSTATE ST_GO
END

State=ST_START_C18BAGS8
	SET numpercycle 8
	SET turn1 1
	SET turn2 0
	SET turn3 0
	SET turn4 1
	SET turn5 1
	SET turn6 0
	SET turn7 1
	SET turn8 1
	; default others
	SET turn9 0
	SET turn10 0
	SET turn11 0
	SET turn12 0
	SET turn13 0
	SET turn14 0
	SET turn15 0
	SET turn16 0
	SETSTATE ST_GO
END

State=ST_START_C14BAGS6
	SET numpercycle 6
	SET turn1 1
	SET turn2 0
	SET turn3 0
	SET turn4 1
	SET turn5 1
	SET turn6 0
	; default others
	SET turn7 0
	SET turn8 0
	SET turn9 0
	SET turn10 0
	SET turn11 0
	SET turn12 0
	SET turn13 0
	SET turn14 0
	SET turn15 0
	SET turn16 0
	SETSTATE ST_GO
END

State=ST_START_C18BAGS6
	SET numpercycle 6
	SET turn1 1
	SET turn2 1
	SET turn3 1
	SET turn4 0
	SET turn5 0
	SET turn6 0
	; default others
	SET turn7 0
	SET turn8 0
	SET turn9 0
	SET turn10 0
	SET turn11 0
	SET turn12 0
	SET turn13 0
	SET turn14 0
	SET turn15 0
	SET turn16 0
	SETSTATE ST_GO
END

State=ST_START_C18BAGS3
	SET numpercycle 3
	SET turn1 0
	SET turn2 0
	SET turn3 0
	; default others
	SET turn4 0
	SET turn5 0
	SET turn6 0
	SET turn7 0
	SET turn8 0
	SET turn9 0
	SET turn10 0
	SET turn11 0
	SET turn12 0
	SET turn13 0
	SET turn14 0
	SET turn15 0
	SET turn16 0
	SETSTATE ST_GO
END

State=ST_GO
	TEST nop <= numpercycle
		TEST nop = 1
			SET curturn turn1
		ELSE
			TEST nop = 2
				SET curturn turn2
			ELSE
				TEST nop = 3
					SET curturn turn3
				ELSE
					TEST nop = 4
						SET curturn turn4
					ELSE
						TEST nop = 5
							SET curturn turn5
						ELSE
							TEST nop = 6
								SET curturn turn6
							ELSE
								TEST nop = 7
									SET curturn turn7
								ELSE
									TEST nop = 8
										SET curturn turn8
									ELSE
										TEST nop = 9
											SET curturn turn9
										ELSE
											TEST nop = 10
												SET curturn turn10
											ELSE
												TEST nop = 11
													SET curturn turn11
												ELSE
													TEST nop = 12
														SET curturn turn12
													ELSE
														TEST nop = 13
															SET curturn turn13
														ELSE
															TEST nop = 14
																SET curturn turn14
															ELSE
																TEST nop = 15
																	SET curturn turn15
																ELSE
																	TEST nop = 16
																		SET curturn turn16
																	ENDTEST
																ENDTEST
															ENDTEST
														ENDTEST
													ENDTEST
												ENDTEST
											ENDTEST
										ENDTEST
									ENDTEST
								ENDTEST
							ENDTEST
						ENDTEST
					ENDTEST
				ENDTEST
			ENDTEST
		ENDTEST
	ENDTEST
	TEST VendeCount = ST_IDLE
		SETSTATE ST_IDLE
	ENDTEST
END

State=ST_NOTURN_CYCLE6
	SET curturn 0
	SET numpercycle 6
	TEST VendeCount = ST_IDLE
		SETSTATE ST_IDLE
	ENDTEST
END

State=ST_NOTURN_CYCLE8
	SET curturn 0
	SET numpercycle 8
	TEST VendeCount = ST_IDLE
		SETSTATE ST_IDLE
	ENDTEST
END

State=ST_NOTURN_CYCLE14
	SET curturn 0
	SET numpercycle 14
	TEST VendeCount = ST_IDLE
		SETSTATE ST_IDLE
	ENDTEST
END

State=ST_NOTURN_CYCLE15
	SET curturn 0
	SET numpercycle 15
	TEST VendeCount = ST_IDLE
		SETSTATE ST_IDLE
	ENDTEST
END

