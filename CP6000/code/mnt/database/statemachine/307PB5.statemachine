STATEMACHINEVERSION 2
Name=Pallebane5
Delaystop=10000000
Input=0,Foto1 "Pallebane5 Foto"
Output=0,Motor "Pallebane5 Motor"
Link=0,Pallebane6
Link=1,Pallebane4
Timeout=0,StopDelay 1000000
Timeout=1,TimeoutDelay 20000000
Timeout=2,StartupDelay 5000000

State=0,ST_HALT
  END

State=0,ST_TIMER
  END

State=0,ST_IDLE
  SET Motor 0
  END

State=1,ST_READY
  TEST Foto1 = 1
    SETSTATE ST_EMPTY
  ELSE 
    TEST Pallebane6 = ST_EMPTY_SHIFT
      SET Motor 1
      SETSTATE ST_SEND
    ELSE 
      SET Motor 0
    ENDTEST
  ENDTEST
  TEST Pallebane4 = ST_IDLE
    SETSTATE ST_IDLE
  ENDTEST  
 END

State=2,ST_SEND
  TEST Pallebane6 = ST_PALLET_REV 
    SETSTATE ST_EMPTY
  ENDTEST
  END

State=3,ST_EMPTY
  TEST Foto1 = 0
    SETSTATE ST_READY
  ELSE 
    TEST Pallebane4 = ST_READY 
    OR Pallebane4 = ST_SEND 
      SET Motor 1
      TIMEOUT TimeoutDelay ST_RESET
      SETSTATE ST_RECIEVE
    ELSE 
      SET Motor 0
    ENDTEST
  ENDTEST
  TEST Pallebane4 = ST_IDLE
    SETSTATE ST_IDLE
  ENDTEST  
END

State=4,ST_RECIEVE
  TEST Foto1 = 0
    SETSTATE ST_READY
  ELSE 
    TEST TimeoutDelay = 1
      SETSTATE ST_RESET
    ENDTEST
  ENDTEST
  END

State=5,ST_RESET
  TEST Foto1 = 0
    SETSTATE ST_READY
  ELSE
	  SET Motor 1
    TIMEOUT StartupDelay STARTUP
    SETSTATE STARTUP
  ENDTEST
  END

State=5,STARTUP
  TEST Foto1 = 0
    SETSTATE ST_READY
  ELSE 
    TEST StartupDelay = 1
      SET Motor 0
      SETSTATE ST_EMPTY
    ENDTEST	
  ENDTEST
  END
